<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DevLink Vault</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="devlink-vault.css">
</head>
<body>
  <header class="header">
    <h1 class="header-title">DevLink Vault</h1>
    <button id="toggle-theme" class="theme-toggle" title="Toggle light/dark mode">
      <span id="theme-icon">🌙</span>
    </button>
  </header>
  <main class="container-main">
    <!-- Form Section -->
    <section class="card">
      <h2 class="section-title">Profile Info</h2>
      <form id="profile-form">
        <div class="input-group">
          <label class="form-label" for="fullName">Full Name</label>
          <input id="fullName" name="fullName" type="text" placeholder="e.g. Jane Doe" class="form-input" />
        </div>
        <div class="input-group">
          <label class="form-label" for="github">GitHub Username</label>
          <input id="github" name="github" type="text" autocomplete="username" autocapitalize="off" spellcheck="false" maxlength="39" pattern="^[a-zA-Z0-9-]{1,39}$" title="GitHub usernames are 1-39 characters, letters, numbers, or hyphens." placeholder="e.g. janedoe" class="form-input" required />
        </div>
        <div class="input-group">
          <label class="form-label" for="linkedin">LinkedIn URL</label>
          <input id="linkedin" name="linkedin" type="url" placeholder="e.g. https://linkedin.com/in/janedoe" class="form-input" />
        </div>
        <div class="input-group">
          <label class="form-label" for="portfolio">Portfolio URL</label>
          <input id="portfolio" name="portfolio" type="url" placeholder="e.g. https://janedoe.com" class="form-input" />
        </div>
        <div class="input-group">
          <label class="form-label">Tech Stack</label>
          <div id="tech-stack-tags" class="mb-2"></div>
          <div style="display: flex; gap: 0.5em;">
            <input id="techInput" type="text" placeholder="Add a skill and press Enter" class="form-input" style="flex:1;" />
            <button id="addTechBtn" type="button" class="btn-main" style="width:auto;min-width:80px;padding:0.7em 1em;">Add</button>
          </div>
        </div>
        <fieldset class="input-group" style="margin-top:2em;">
          <legend class="form-label" style="margin-bottom:0.5em;">Select GitHub Features</legend>
          <div style="display:flex;flex-wrap:wrap;gap:1em;align-items:center;">
            <label><input type="checkbox" id="showStats" checked> Stats Card</label>
            <label><input type="checkbox" id="showRepoCount" checked> Repo Count Card</label>
            <label><input type="checkbox" id="showTrophies" checked> Trophies</label>
            <label><input type="checkbox" id="showTopLangs" checked> Top Languages</label>
            <label><input type="checkbox" id="showSocial" checked> Social Badges</label>
            <label><input type="checkbox" id="showSkills" checked> Skill Badges</label>
          </div>
        </fieldset>
        <button type="submit" class="btn-main">Generate Markdown</button>
      </form>
      <div class="note text-sm" style="margin-top:1.5em;">
        <span class="font-semibold">Note:</span> If you leave any field blank, the generated Markdown will use only the available information.
      </div>
    </section>
    <!-- Preview Section -->
    <section class="card">
      <h2 class="section-title">Live Markdown Preview</h2>
      <div class="preview-gradient">
        <pre id="markdown-preview"></pre>
      </div>
      <div class="preview-gradient" style="margin-top:1em;">
        <div id="live-profile-preview" style="font-family:inherit;"></div>
      </div>
      <button id="copy-btn" class="btn-copy">Copy Markdown</button>
    </section>
  </main>
  <footer class="footer">
    <span>© 2025 DevLink Vault &mdash; Crafted with <span style="color:#f472b6;">♥</span> by Raghul.M (<a href="https://github.com/raghul202" target="_blank" style="color:#6366f1;text-decoration:underline;">@raghul202</a>) &mdash; using Tailwind CSS</span>
  </footer>
  <script>
    // --- Theme Toggle ---
    const toggleTheme = document.getElementById('toggle-theme');
    const themeIcon = document.getElementById('theme-icon');
    function setTheme(dark) {
      document.body.classList.toggle('dark', dark);
      themeIcon.textContent = dark ? '☀️' : '🌙';
      localStorage.setItem('theme', dark ? 'dark' : 'light');
    }
    toggleTheme.addEventListener('click', () => {
      const isDark = document.body.classList.contains('dark');
      setTheme(!isDark);
    });
    (function () {
      const userTheme = localStorage.getItem('theme');
      const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(userTheme === 'dark' || (!userTheme && systemDark));
    })();

    // --- Tech Stack Tag Input ---
    const techInput = document.getElementById('techInput');
    const addTechBtn = document.getElementById('addTechBtn');
    const techStackTags = document.getElementById('tech-stack-tags');
    let techStack = [];
    function renderTechTags() {
      techStackTags.innerHTML = '';
      techStack.forEach((tech, idx) => {
        const tag = document.createElement('span');
        tag.className = 'tag';
        tag.innerHTML = `${tech} <button type="button" title="Remove">&times;</button>`;
        tag.querySelector('button').onclick = function() {
          techStack.splice(idx, 1);
          renderTechTags();
          updatePreview();
        };
        techStackTags.appendChild(tag);
      });
    }
    function addTech() {
      const val = techInput.value.trim();
      if (val && !techStack.includes(val)) {
        techStack.push(val);
        techInput.value = '';
        renderTechTags();
        updatePreview();
      }
    }
    addTechBtn.addEventListener('click', addTech);
    techInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        e.preventDefault();
        addTech();
      }
    });

    // --- Markdown Generation ---
    const form = document.getElementById('profile-form');
    const preview = document.getElementById('markdown-preview');
    const copyBtn = document.getElementById('copy-btn');
    const livePreview = document.getElementById('live-profile-preview');
    function getBadgeMarkdown(label, value, color, logo, url) {
      return `[![${label}](https://img.shields.io/badge/${encodeURIComponent(label)}-${encodeURIComponent(value)}-${color}?style=for-the-badge&logo=${logo})](${url})`;
    }
    function getSkillBadge(skill) {
      const map = {
        'JavaScript': { color: 'F7DF1E', logo: 'javascript', logoColor: 'black', url: 'https://developer.mozilla.org/en-US/docs/Web/JavaScript' },
        'TypeScript': { color: '3178C6', logo: 'typescript', logoColor: 'white', url: 'https://www.typescriptlang.org/' },
        'React': { color: '20232A', logo: 'react', logoColor: '61DAFB', url: 'https://reactjs.org' },
        'Python': { color: '3776AB', logo: 'python', logoColor: 'white', url: 'https://python.org' },
        'HTML': { color: 'E34F26', logo: 'html5', logoColor: 'white', url: 'https://developer.mozilla.org/en-US/docs/Web/HTML' },
        'CSS': { color: '1572B6', logo: 'css3', logoColor: 'white', url: 'https://developer.mozilla.org/en-US/docs/Web/CSS' },
        'Node.js': { color: '339933', logo: 'node.js', logoColor: 'white', url: 'https://nodejs.org' },
        'Vue': { color: '4FC08D', logo: 'vue.js', logoColor: 'white', url: 'https://vuejs.org' },
        'Angular': { color: 'DD0031', logo: 'angular', logoColor: 'white', url: 'https://angular.io' },
        'Java': { color: '007396', logo: 'java', logoColor: 'white', url: 'https://www.java.com' },
        'C++': { color: '00599C', logo: 'cplusplus', logoColor: 'white', url: 'https://isocpp.org' },
        'C#': { color: '239120', logo: 'csharp', logoColor: 'white', url: 'https://docs.microsoft.com/en-us/dotnet/csharp/' },
        'Go': { color: '00ADD8', logo: 'go', logoColor: 'white', url: 'https://golang.org' },
        'PHP': { color: '777BB4', logo: 'php', logoColor: 'white', url: 'https://www.php.net' },
        'Django': { color: '092E20', logo: 'django', logoColor: 'white', url: 'https://www.djangoproject.com/' },
        'Flask': { color: '000000', logo: 'flask', logoColor: 'white', url: 'https://flask.palletsprojects.com/' },
        'Tailwind CSS': { color: '38B2AC', logo: 'tailwindcss', logoColor: 'white', url: 'https://tailwindcss.com/' },
      };
      const s = map[skill] || { color: 'gray', logo: 'code', logoColor: 'white', url: '#' };
      return `[![${skill}](https://img.shields.io/badge/${encodeURIComponent(skill)}-${s.color}?style=for-the-badge&logo=${s.logo}&logoColor=${s.logoColor})](${s.url})`;
    }
    function updatePreview() {
      const fullName = form.fullName.value.trim();
      const github = form.github.value.trim();
      const linkedin = form.linkedin.value.trim();
      const portfolio = form.portfolio.value.trim();
      const showStats = document.getElementById('showStats').checked;
      const showRepoCount = document.getElementById('showRepoCount').checked;
      const showTrophies = document.getElementById('showTrophies').checked;
      const showTopLangs = document.getElementById('showTopLangs').checked;
      const showSocial = document.getElementById('showSocial').checked;
      const showSkills = document.getElementById('showSkills').checked;
      let md = '';
      if (fullName) md += `# Hi, I'm ${fullName} 👋\n\n`;
      if (showSocial) {
        if (github) md += getBadgeMarkdown('GitHub', `@${github}`, '181717', 'github', `https://github.com/${github}`) + '\n';
        if (linkedin) md += getBadgeMarkdown('LinkedIn', linkedin.replace(/https:\/\/|www\.|linkedin.com\//g, ''), 'blue', 'linkedin', linkedin) + '\n';
        if (portfolio) md += getBadgeMarkdown('Portfolio', portfolio.replace(/https:\/\/|www\./g, ''), '24292e', 'google-chrome', portfolio) + '\n';
      }
      if (showSkills && techStack.length) md += techStack.map(getSkillBadge).join('\n') + '\n';
      // Always show GitHub features placeholders if checkboxes are checked, even if username is empty
      if (showStats) md += `\n![GitHub Stats](https://github-readme-stats.vercel.app/api?username=${github || 'octocat'}&show_icons=true&theme=default)\n`;
      if (showRepoCount) md += `![Repo Count](https://github-readme-stats.vercel.app/api?username=${github || 'octocat'}&count_private=true&show_icons=true&hide=prs&hide_title=true&hide_rank=true&custom_title=Total%20Repos)\n`;
      if (showTrophies) md += `![Trophies](https://github-profile-trophy.vercel.app/?username=${github || 'octocat'}&margin-w=10&theme=algolia)\n`;
      if (showTopLangs) md += `![Top Languages](https://github-readme-stats.vercel.app/api/top-langs/?username=${github || 'octocat'}&layout=compact)\n`;
      preview.textContent = md || 'Fill out the form to generate your Markdown profile card.';
      // Live visual preview
      let html = '';
      if (fullName) html += `<h2 style='font-size:1.5em;font-weight:700;margin-bottom:0.5em;'>Hi, I'm ${fullName} 👋</h2>`;
      if (showSocial) {
        html += '<div style="margin-bottom:0.5em;display:flex;flex-wrap:wrap;gap:0.5em;">';
        if (github) html += `<a href='https://github.com/${github}' target='_blank' style='text-decoration:none;'><img alt='GitHub' src='https://img.shields.io/badge/GitHub-@${github}-181717?style=for-the-badge&logo=github'></a>`;
        if (linkedin) html += `<a href='${linkedin}' target='_blank' style='text-decoration:none;'><img alt='LinkedIn' src='https://img.shields.io/badge/LinkedIn-${encodeURIComponent(linkedin.replace(/https:\/\/|www\.|linkedin.com\//g, ''))}-blue?style=for-the-badge&logo=linkedin'></a>`;
        if (portfolio) html += `<a href='${portfolio}' target='_blank' style='text-decoration:none;'><img alt='Portfolio' src='https://img.shields.io/badge/Portfolio-${encodeURIComponent(portfolio.replace(/https:\/\/|www\./g, ''))}-24292e?style=for-the-badge&logo=google-chrome'></a>`;
        html += '</div>';
      }
      if (showSkills && techStack.length) {
        html += '<div style="margin-bottom:0.5em;display:flex;flex-wrap:wrap;gap:0.5em;">';
        html += techStack.map((skill, idx) => {
          const map = {
            'JavaScript': { color: 'F7DF1E', logo: 'javascript', logoColor: 'black', url: 'https://developer.mozilla.org/en-US/docs/Web/JavaScript' },
            'TypeScript': { color: '3178C6', logo: 'typescript', logoColor: 'white', url: 'https://www.typescriptlang.org/' },
            'React': { color: '20232A', logo: 'react', logoColor: '61DAFB', url: 'https://reactjs.org' },
            'Python': { color: '3776AB', logo: 'python', logoColor: 'white', url: 'https://python.org' },
            'HTML': { color: 'E34F26', logo: 'html5', logoColor: 'white', url: 'https://developer.mozilla.org/en-US/docs/Web/HTML' },
            'CSS': { color: '1572B6', logo: 'css3', logoColor: 'white', url: 'https://developer.mozilla.org/en-US/docs/Web/CSS' },
            'Node.js': { color: '339933', logo: 'node.js', logoColor: 'white', url: 'https://nodejs.org' },
            'Vue': { color: '4FC08D', logo: 'vue.js', logoColor: 'white', url: 'https://vuejs.org' },
            'Angular': { color: 'DD0031', logo: 'angular', logoColor: 'white', url: 'https://angular.io' },
            'Java': { color: '007396', logo: 'java', logoColor: 'white', url: 'https://www.java.com' },
            'C++': { color: '00599C', logo: 'cplusplus', logoColor: 'white', url: 'https://isocpp.org' },
            'C#': { color: '239120', logo: 'csharp', logoColor: 'white', url: 'https://docs.microsoft.com/en-us/dotnet/csharp/' },
            'Go': { color: '00ADD8', logo: 'go', logoColor: 'white', url: 'https://golang.org' },
            'PHP': { color: '777BB4', logo: 'php', logoColor: 'white', url: 'https://www.php.net' },
            'Django': { color: '092E20', logo: 'django', logoColor: 'white', url: 'https://www.djangoproject.com/' },
            'Flask': { color: '000000', logo: 'flask', logoColor: 'white', url: 'https://flask.palletsprojects.com/' },
            'Tailwind CSS': { color: '38B2AC', logo: 'tailwindcss', logoColor: 'white', url: 'https://tailwindcss.com/' },
          };
          const s = map[skill] || { color: 'gray', logo: 'code', logoColor: 'white', url: '#' };
          return `<a href='${s.url}' target='_blank'><img alt='${skill}' src='https://img.shields.io/badge/${encodeURIComponent(skill)}-${s.color}?style=for-the-badge&logo=${s.logo}&logoColor=${s.logoColor}'></a>`;
        }).join('');
        html += '</div>';
      }
      // Always show GitHub features placeholders if checkboxes are checked, even if username is empty
      if (showStats) html += `<img alt='GitHub Stats' style='max-width:100%;margin:0.5em 0;' src='https://github-readme-stats.vercel.app/api?username=${github || 'octocat'}&show_icons=true&theme=default' />`;
      if (showRepoCount) html += `<img alt='Repo Count' style='max-width:100%;margin:0.5em 0;' src='https://github-readme-stats.vercel.app/api?username=${github || 'octocat'}&count_private=true&show_icons=true&hide=prs&hide_title=true&hide_rank=true&custom_title=Total%20Repos' />`;
      if (showTrophies) html += `<img alt='Trophies' style='max-width:100%;margin:0.5em 0;' src='https://github-profile-trophy.vercel.app/?username=${github || 'octocat'}&margin-w=10&theme=algolia' />`;
      if (showTopLangs) html += `<img alt='Top Languages' style='max-width:100%;margin:0.5em 0;' src='https://github-readme-stats.vercel.app/api/top-langs/?username=${github || 'octocat'}&layout=compact' />`;
      livePreview.innerHTML = html || '<span style="color:#aaa;">Live profile preview will appear here.</span>';
    }
    document.getElementById('profile-form').addEventListener('submit', e => {
      e.preventDefault();
      updatePreview();
    });
    // Initial preview
    updatePreview();
    // --- Clipboard ---
    document.getElementById('copy-btn').addEventListener('click', () => {
      const text = preview.textContent;
      if (!text || text.startsWith('Fill out')) return;
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.textContent = 'Copied!';
        setTimeout(() => (copyBtn.textContent = 'Copy Markdown'), 1500);
      });
    });

    // --- Live preview on all input changesdd ---
    [
      'fullName',
      'github',
      'linkedin',
      'portfolio',
      'showStats',
      'showRepoCount',
      'showTrophies',
      'showTopLangs',
      'showSocial',
      'showSkills'
    ].forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        el.addEventListener('input', updatePreview);
        el.addEventListener('change', updatePreview);
      }
    });
  </script>
</body>
</html>

